<html>
<head>
    <title>Search Customer Care Infomation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="/css/mask.css" rel="stylesheet" type="text/css"/>
    <link href="/css/mycss.css" rel="stylesheet" type="text/css"/>
    <script src="/js/jquery.1.9.js"></script>
    <script src="/js/session.js"></script>
    <script src="/js/cookie.js"></script>
    <script type="text/javascript" src="/js/mask.js"></script>
    <script type="text/javascript" src="/js/myjs.js"></script>
</head>
<body>
<div id="mydiv">
    <h2>Search Customer Care Infomation</h2>

    <div style="float:left">
        <!--<b>Partner Code</b>: <input type="text" style="border:1px solid #778899; width:150px" name="sServiceId" id="sServiceId">-->
        <b>Number</b>: <input type="text" style="border:1px solid #778899; width:150px" name="number"
                              id="numberId">
        <b>Group:
            <select id="groupId" name="groupId" style="width: 150px; font-size:14px; padding: 3px">
                <option value="">All</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </b>
        <input type="button" id="btnSearch" value="Search">
    </div>
    <div class="clear"></div>

    <div id="table"></div>

    <div class="clear"></div>

</div>
<script type="text/javascript">

    $(document).ready(function () {
        init();

    });

    $('#btnSearch').click(function () {
            init();
    });

    function clearTable() {
        var head = "<tr>";
        head += "<th>Number</th>";
        head += "<th>Customer Name </th>";
        head += "<th>Enable</th>"; //Cho phep tra thuong hay khong
        head += "<th>Group</th>";   // Nhom tra thuong
        head += "<th>Group Description</th>";
        head += "<th>Up time VN</th>";

        head += "<th>Number of promotional</th>";
        head += "<th>Time of promotional</th>";

        head += "<th>Begin time</th>";
        head += "<th>Org Begin Time</th>";

        head += "<th>Finish Time</th>";
        head += "<th>Org Finish Time</th>";

        head += "<th>Duration</th>";
        head += "<th>Promotional value</th>";

        head += "<th>Momo agent</th>";
        head += "<th>Gift type id </th>";
        head += "<th>Trans Id </th>";
        head += "<th>Trans Count </th>";
        head +="</tr>";
        $("#table").html(head);

    }

    function addItem(item) {
        var row;
        row = "<tr>";
        row += "<td> " + item._id + " </td>";
        row += "<td> " + item.nameCustomer + "</td>";
        row += "<td> " + item.enable + " </td>";
        row += "<td> " + item.group + " </td>";
        row += "<td> " + item.grDesc + " </td>";
        row += "<td> " + item.upTimeVn + " </td>";
        row += "<td> " + item.pcnt + " </td>";

        row += "<td> " + item.proTimeVn + " </td>";
        row += "<td> " + item.dFrom + " </td>";
        row += "<td> " + item.orgDFrom + " </td>";
        row += "<td> " + item.dTo + " </td>";
        row += "<td> " + item.orgDto + " </td>";
        row += "<td> " + item.dur + " </td>";
        row += "<td> " + item.proVal + " </td>";

        row += "<td> " + item.mmAgent + " </td>";
        row += "<td> " + item.gTypeId + " </td>";
        row += "<td> " + item.tid + "</td>";
        row += "<td> " + item.transCount + "</td>";
        row += "</tr>";

        $("#table").append(row);
    }

    function init() {
         $.ajax({
            url: "/servicecustomer/searchallcustomercare",
            type: "GET",
            data: {
                number: $("#numberId").val(),
                group: $("#groupId").val()
            },
            success: function (array) {
                clearTable();
                for(i=0;i<array.length; i++){
                    addItem(array[i])
                }
            },
            error: function () {
                alert('Có lỗi kết nối xảy rsa');
            }
        });
    }


</script>
</body>
</html>