<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all-neptune.css"/>

    <script type="text/javascript" src="extjs/ext-all-debug.js"></script>
    <script type="text/javascript" src="js/LeftMenu.js"></script>
    <script type="text/javascript" src="js/Header.js"></script>

</head>
<body>
<script type="application/javascript">
//    Ext.require('*');
//
//    function createTextField(fieldMapping,label,w,isEmpty){
//        if(w==null) w = 127;
//        return new Ext.form.field.Text({
//            xtype: 'textfield',
//            name: fieldMapping,
//            fieldLabel: label,
//            allowBlank: isEmpty,  // requires a non-empty value
//            width:w,
//            labelAlign:'right'
//        });
//    }
//
//    var textField = createTextField("a", "value", null, false);
//
//    var c1 = Ext.create("Ext.panel.Panel", {
//        layout: "vbox",
//        border: false,
//        items: [
//            textField
//        ]
//    });
//
//    function createTextBox(){
//        return {
//            xtype: "Ext.form.field.TextView",
//            id: "txtTestPhones",
//            fieldLabel: "Phone numbers:",
//            text: "phones"
//        }
//
//    }
//
//
//
//    var c2 = Ext.create("Ext.panel.Panel", {
//        layout: "vbox",
//        border: false,
//        margin: 5,
//        items: [
//            {
//                xtype : "panel",
//                title : "Testing phone list",
//                height:"100%",
//                items: [
//                    {
//                        xtype: "textfield",
//                        id: "txtTestPhones",
//                        fieldLabel: "Phone numbers:",
//                        text: "phones",
//                        width: "100%"
//                    }
//                ]}
//        ],
//        updateData: function () {
//            Ext.Ajax.request({
//                url: '/service/config/getTestPhones',
//                params: {
//                },
//                success: function (response) {
//                    var obj = Ext.decode(response.responseText);
////                    console.log();
//                    Ext.getCmp("txtTestPhones").setValue(obj.phones);
//                },
//                failure: function () {
//                    console.log("Can't perform request");
//                }
//            });
//        }
//    });
//
//    var centerContent = Ext.create("Ext.panel.Panel", {
//        layout: "",
//        items: [c1]
//    });
//
//    var leftMenuContent = Ext.create("WebAdmin.view.LeftMenu", {
//        onCommonInfoButtonClick: function () {
//            centerContent.removeAll(false);
//            centerContent.add(c2);
//            c2.updateData();
//            centerContent.updateLayout();
//        }
//    });

//var centerPage = Ext.create('Ext.ux.SimpleIFrame', {
//    title: 'Hello',
//    border: false,
//    src: 'http://vnexpress.net'
//});

var leftMenuContent = Ext.create("WebAdmin.view.LeftMenu", {
    onCommonInfoButtonClick: function () {
        Ext.getDom('centerPage').src = "/configInfo.html";
    },
    onStatusButtonClick: function () {
        Ext.getDom('centerPage').src = "/systemStatus.html";
    },
    onServiceButtonClick: function () {
        Ext.getDom('centerPage').src = "/serviceStatus.html";
    }
});


var centerContent = Ext.create("Ext.panel.Panel", {
        layout: "fit",
        height: "100%",
        border: false,
        items: [
            {
                xtype : "component",
                layout: "fit",
                height: "100%",
                id    : 'centerPage',  // Add id
                border: false,
                autoEl : {
                    tag : "iframe",
                    src : "http://app.momo.vn"
                }
            }
        ]
    });

Ext.onReady(function () {
    var currentName,
            panelCache = [],
            panel,
            replace = function (config, name) {
                var btns = Ext.getCmp('btns');
                if (name && name != currentName) {
                    currentName = name;
                    if (btns.items.length) {
                        btns.remove(0, false);
                    } else {
                        btns.body.innerHTML = '';
                    }
                    config.border = false,
                            panel = panelCache[name] || (panelCache[name] = Ext.widget('panel', config));
                    btns.add(panel);
                }
            };

    Ext.create('Ext.Viewport', {
        layout: 'border',

        items: [
            {
                region: 'north',
                items: [
                    {
                        xtype: "topHeader"
                    }
                ]
            },
            {
                id: 'btns',
                region: 'west',
                title: "Menu",
                split: true,
                collapsible: true,
                width: 250,
                minWidth: 200,
                maxWidth: 500,
                layout: 'fit',
                margin: '5 0 5 5',
                items: [
                    leftMenuContent
                ]
            },
            {
                region: 'center',
                xtype: "panel",
                layout: "fit",
                margin: '5 5 5 0',
                items: [
                    centerContent
                ]
            }
        ]
    });
});
</script>
</body>
</html>
