<html>
<head>
    <title>Adjust Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../css/mask.css" rel="stylesheet" type="text/css" />
    <link href="../css/mycss.css" rel="stylesheet" type="text/css"/>
    <script src="../js/jquery.1.9.js"></script>
    <script type="text/javascript" src="../js/mask.js"></script>
</head>
<body>
<div id="mydiv">
    <h2>Kiểm tra thông tin Mã Khuyến Mãi</h2>
    <table>
        <tr>
            <td>Nhập mã kiểm tra:</td>
            <td><input style="width: 100px; font-size:16px; padding: 3px" type="text" id="txtCode"/></td>
            <td colspan="2" align="center">
                <input style="padding: 3px" type="button" value="Check" id="btnCheck"/>
            </td>
        </tr>
    </table>

    <div id="responseDiv"></div>

</div>


<script type="text/javascript">
    $(document).ready(function () {
    });

    $('#btnCheck').click(function () {

            var code = $("#txtCode").val();
            if(code === ""){
                alert("Vui lòng nhập mã cần kiểm tra");
                $("#txtCode").focus();
                return;
            }
            $('#mydiv').mask("Loading...");
            $.ajax({
                url: "/invitefriend/checkstatus",
                type: "GET",
                data: {
                    "code":$("#txtCode").val()
                },
                success: function (json) {

                    $('#mydiv').unmask();
                    var result ="";
                    result += "Mã: " + json.code + "<br/>"

                    if (json.error == 0  || json.error == "0"){
                        if(json.creator != null || json.creator!="" ){
                            result +="SĐT tạo mã: <b>" + json.creator + "</b><br/>"
                        }
                        result +="<b>Hiệu lực:</b>" + "<br/>";
                        result +="Từ ngày: <b>" + json.fdate + "</b><br/>"
                        result +="Đến ngày: <b>" + json.tdate + "</b><br/>"
                    }
                    else{

                        result +="Mô tả: <b>" + json.desc + "</b>";

                        if(json.for != null && json.for !=""){
                            result +="<br/>Đã khuyến mãi cho: <b>" + json.for + "</b>";
                        }

                        if(json.time != null && json.time !=""){
                            result +="<br>Khuyến mãi lúc: <b>" + json.time + "</b>";
                        }
                    }

                    $('#txtCode').val('');
                    $('#txtCode').focus();
                    $('#responseDiv').html(result);

                },
                error: function () {
                    $('#mydiv').unmask();
                    alert('Có lỗi kết nối xảy ra');
                }
            });
        });

</script>
</body>
</html>