<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width" />
    <title>CHUYỂN TIỀN DI ĐỘNG</title>
    <link rel="stylesheet" type="text/css" href="view.css" media="all">
</head>
<body id="main_body">
<script type="text/javascript">

    function test(){
        //todo do some check

        var input = document.getElementById("OldPin");
        var oldPin = input.value;
        if(!validPin(oldPin)){
            showError("Mã pin  phải là chuỗi 6 chữ số");
            input.focus();
            return;
        }

        var txtPin1 = document.getElementById("NewPin1");
        var newPin1 = txtPin1.value;
        var txtPin2 = document.getElementById("NewPin2");
        var newPin2 = txtPin2.value;

        if(oldPin == newPin1){
            showError("Mã pin mới không được phép trùng với mã pin bạn nhận được");
            txtPin1.focus();
            return;
        }

        if(!validPin(newPin1)){
            showError("Mã pin mới phải là chuỗi 6 chữ số");
            txtPin1.focus();
            return;
        }

        if(newPin2 != newPin1){
            showError("Mã pin không giống nhau");
            txtPin2.focus();
            return;
        }

        document.getElementById("formOtp").submit();
    }


    function validPin(s){
        if(s.length != 6){
            return false;
        }

        for(var i = 0; i< 6; i++){
            var c = s.charCodeAt(i);
            if( c < 48 || c > 57){
                return false;
            }
        }

        return true;
    }


    function showError(errMsg){
        document.getElementById("divError").style.display = "block";
        document.getElementById("lblError").innerHTML = errMsg;
    }

    function hideError(){
        document.getElementById("divError").style.display = "none";
    }
</script>
<script type="text/javascript">
    var lastErr = "";//"${lastErr}";
    if(lastErr != ""){
        showError(lastErr);
    }
</script>


<div id="form_container">
    <div id="header" style="background-color: #B0006e;padding-left:9px">
        <table>
            <tr>
                <td><img src="logo2.png"></td>
                <td><p style="display:inline-block; color:white; font-weight:bold;">CHUYỂN TIỀN DI ĐỘNG</p>
                </td>
            </tr>
        </table>
    </div>


    <form id="formOtp" action="?3=${sendCode}" method="get">
    <div id="container2" style="padding-right:15px;height:200px">
        <div id="divError" style="display: none">
            <br/>
            <table style="background-color:#e98c38; height:5px">
                <tr style="background-color:#e98c38 ; ">
                    <td  style="background-color:#e98c38 ; color:white;width:100%">
                        <p style="background-color:#e98c38 ; color:white;margin:0" id="lblError">
                            &nbsp;&nbsp;Lỗi thông tin nhập vào
                        </p>
                    <td style="background-color:#e98c38 ; color:white;width:5%">
                        <div style="background-color:#e98c38 ; color:white;text-decoration:none;font-size: 16pt;padding:0 " onclick="hideError()">&nbsp;&nbsp;&nbsp;X&nbsp;</div>
                    </td>
                    </td>
                </tr>
            </table>
        </div>
        <input id="OldPin" name="OldPin" type="password" placeholder="Nhập mã PIN bạn nhận được" style="width:100%; height:20px; margin-top:25px">
        <input id="NewPin1" name="NewPin1" type="password" placeholder="Nhập mã PIN mới" style="width:100%; height:20px; margin-top:25px">
        <input id="NewPin2" name="NewPin2" type="password" placeholder="Nhập lại mã PIN mới" style="width:100%; height:20px; margin-top:5px">
        <input type="hidden" name="3" value="${sendCode}"/>

    </div>
    </form>

    <div id="buttondiv">
        <button style="background-color: #B0006e; color:white;border-radius: 4px; width:100%; height:40px" onclick="test()">Tiếp tục
        </button>
    </div>
</div>


</body>
</html>
